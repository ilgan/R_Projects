---
title: "hw10"
author: "iganelin"
date: "December 1, 2017"
output: html_document
---
## HW10


#### We start with loading all the necessary general purpose libraries

```{r message=FALSE}
library(tidyverse)
library(magrittr)
library(purrr)
library(glue)
library(stringr)
library(purrr)
```

#### Libraries for web scraping

```{r message=FALSE}
library(rvest)
library(xml2)
library(httr)
```
#### Working with the [OMDB API](https://www.omdbapi.com)

```{r message=FALSE}
get_movie <- function(title, year, key){
	query_string <- glue("http://www.omdbapi.com/?t={title}&y={year}&apikey={key}")
	movie_result <- httr::GET(query_string)
	movie_content <- as.data.frame(content(movie_result))
	return(movie_content)
}
```

##### Start with requesting the information of one of the movies you would like to see. For testing purposes only use your key. you can request it [here](https://www.omdbapi.com/apikey.aspx).

```{r message=FALSE}
movie_info <- get_movie("babe", "1995","33ffee5e")
typeof(movie_info)
View(movie_info)
```

##### Let's expand our function to output multiple

```{r message=FALSE}
get_movies <- function(title, key){
	for (i in 1:length(movies_list)){
		if (i == 1){
			query_string <- glue("http://www.omdbapi.com/?t={movies_list[i]}&apikey={key}")
			movie_result <- httr::GET(query_string)
			movie_content <- as.data.frame(content(movie_result))
		}
		else{
			query_string <- glue("http://www.omdbapi.com/?t={movies_list[i]}&apikey={key}")
			movie_result <- httr::GET(query_string)
			movie_content <- full_join(movie_content, as.data.frame(content(movie_result)), by = colnames(as.data.frame(content(movie_result))))
		}
	}
	return(movie_content)
}
```

#### Let's see the result.
We start with creating a list of the movies we would like to download info for.

```{r message=FALSE}
movies_list <- c("babe", "thor", "spiderman")
movies <- get_movies(movies_list, "33ffee5e")
View(movies)
```

